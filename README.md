# SimpleMVC-example

Пример проекта, разработанного на учебном движке (MCV-фреймворке) SimpleMVC.


## Установка

* Клонируем репозиторий.
* Подтягиваем зависимости:
``` 
composer install
```
* Разворачиваем  приложенный дамп

## Разработка

### Использование данных конфигурационного файла

Подключаем клсс для работы с даными конфига:

```php
use ItForFree\SimpleMVC\Config;
```

Получение класса объекта (например, пользователя):

```php
$User = Config::getObject('core.user.class');
```
получение элемента (без необъходимости инстанцировать класс с таким именем):

```php
$User = Config::get('путь.в.массиве.конфига');
```

### Работа с объектом User

Получить доступ к объекту-синглтону можно так (через конфиг):

```php
$User = Config::getObject('core.user.class');
```

Получить подробную инфромацию о том почему есть или нет доступа к какому-либо  маршрутут для данного пользователя можно распечатав данные метода:
```php
$User->explainAccess('/ваш/маршрут');
```

## ToDo

Что ещё надо улучшить/сделать (самсем универсальное выносим в rusphp остальное относится к ядру т.е. самому `SimpleMVC`):

* Добавить html-хэлпер (возм. с участием `rusphp`)
* Несовершенный контроль доступа -- rules лучше сделать методом (чтобы, возможно, что-то вычислять динамически). 
    Ввести пседонимы @ и ? для роли зарегистрированного пользователя и гостя.
* Сделать  отдачу `404` в ответ на найденные контроллеры или их действия, аналогично подумать над передачей кодов для других ошибок (`исключений SimpleMVC`)
* Возможно, надо пересмотреть свзимоотношения трейта конторля доступа, контроллера и класса пользоватлея 
    -- м.б. трейт надо вынуть из контроллера и сделать либо независимым либо перенести в класс пользователя.
* Проверить работу класса, управляющего сессией, на предмет блокировок и "в целом".
* Прикрутить миграции.

